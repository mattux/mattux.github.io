<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Startpage minimale che utilizza un menù &middot; Mattux >> log</title>
  <meta name="description" content="Un po' di tempo fa, mi sono reso conto che all'apertura del browser ho l'esigenza di andare nei soliti siti web e quindi mi sono deciso, anche per esercitarm...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://mattux.github.io/2011/09/05/startpage-minimale-che-utilizza-un-menu.html">
  <link rel="alternate" type="application/rss+xml" title="Mattux >> log" href="http://mattux.github.io/feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

      <a class="site-title" href="/">Mattux >> log</a>
      <p class="site-description">So contare fino a 31 usando una mano sola.</p>

  </div>
  <div class="wrapper">
<!--
    <p class="text">So contare fino a 31 usando una mano sola.</p>
-->
  <div class="trigger">
    <span class="rss-subscribe"><a href="/feed.xml">RSS</a></span>
    &nbsp;·&nbsp;
    <a href="https://plus.google.com/b/116514234298958416545/116514234298958416545/">Google+</a></span>
    &nbsp;·&nbsp;
    <a href="https://github.com/mattux/">GitHub</a></span>
    &nbsp;·&nbsp;
    
      
      <a class="page-link" href="/about/">About</a>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </div>
  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Startpage minimale che utilizza un menù</h1>
<!--
    <p class="post-meta">Sep 5, 2011 • Matteo Pani</p>
-->
    <p class="post-meta">Sep 5, 2011</p>

    <!-- MATHJAX -->
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  </header>

  <article class="post-content">
    <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-nWFsC6VKmmk/TlADg4-EaXI/AAAAAAAAAVg/JCvX4RjDXhA/s1600/user-home.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="200" src="http://4.bp.blogspot.com/-nWFsC6VKmmk/TlADg4-EaXI/AAAAAAAAAVg/JCvX4RjDXhA/s200/user-home.png" width="200" /></a></div>Un po' di tempo fa, mi sono reso conto che all'apertura del browser ho l'esigenza di andare nei soliti siti web e quindi mi sono deciso, anche per esercitarmi col nuovo <a href="http://www.w3schools.com/css3/default.asp">css3</a>, di farmi <a href="http://yfrog.com/h0xkxop">una bella startpage</a>: una specie di home che gira in locale con tutti i link che potrebbero servire all'apertura del browser . Avevo tutti i link in vista e stavo bene, ma poi ho sentito il bisogno di realizzarne un'altra (partendo dallo stesso codice) ancora più scarna e che fosse in grado di rimanere tale anche con l'aumentare del numero di link e vi voglio parlare di come ho realizzato quella nuova. L'implementazione è sicuramente migliorabile, ma a me va benissimo così :)<br /><br /><br /><a name='more'></a>L'obiettivo di partenza era "visualizzare solo ciò che serve quando serve" (che è anche una buona regola di usabilità) e in mente mi è venuto questo:<br /><blockquote>Sezione #1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; link #1<br />Sezione #2 ---- &nbsp; link #2 <br />.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .<br />.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .<br />Sezione #n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; link #n</blockquote><br />Cioè una specie di menù dove selezionare di volta in volta la raccolta di link che mi serviva (social network, università, ecc) e visualizzare soltanto quella.<br /><br />Gli ingredienti sono l'<b>HTML</b> (non 5), il <b>CSS</b> e il <b>Javascript</b>. L'HTML ci serve per costruire la pagina inserendo gli elementi che ne devono far parte; il CSS ci occorre per impostarne l'aspetto e per perfezionare il posizionamento degli oggetti della pagina (e per aggiungere qualche "effetto speciale"); il Javascript ci serve per implementare la visualizzazione e il nascondimento dei link.<br /><br />Parliamo di come ho risolto io il problema. Partiamo dal codice HTML, proseguiamo per il CSS e finiamo con le funzioni Javascript. Ovviamente non analizziamo tutto riga per riga, ma solo le parti fondamentali e necessarie alla comprensione.<br /><br /><br /><h3>                           HTML</h3>Tralasciando la testata e varie cose di contorno, la ciccia dell HTML che ci interessa è strutturata in questo modo:<br /><blockquote>- div_contenitore_principale<br />&nbsp; -div_contenitore_secondario<br />&nbsp;&nbsp;&nbsp; -div_contenuto_link #1<br />&nbsp;&nbsp;&nbsp; -div_contenuto_link #2<br />&nbsp;&nbsp;&nbsp; -div_contenuto_link #3<br />&nbsp;&nbsp;&nbsp; .<br />&nbsp;&nbsp;&nbsp; .<br />&nbsp;&nbsp;&nbsp; -div_contenuto_link #n</blockquote>&nbsp;Dove ogni <i>div_contenuto_link</i> l'ho strutturato così:<br /><blockquote>- div_titolo<br />&nbsp; - intestazione<br /><br />- lista link<br />&nbsp; - link #1<br />&nbsp; - link #2<br />&nbsp; .<br />&nbsp; .<br />&nbsp; - link #n</blockquote>Riassumendo: i link sono raggruppati in blocchi (div) suddivisi in due parti in cui la prima è l'intestazione e l'altra è l'elenco dei link di quella sezione. <br /><br />Per capirci meglio vediamo ora un po' di html:<br /><blockquote>&nbsp;&nbsp;		&lt;div id="account" class="link"&gt; &lt;!-- <i>div_contenuto_link</i>&nbsp; --&gt;<br />&nbsp;&nbsp;&nbsp;			&lt;div id="account_tit" class="titolo"&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;				&lt;h2&gt;Social Network&lt;/h2&gt; <br />&nbsp;&nbsp;&nbsp;			&lt;/div&gt; <br /><br />&nbsp;&nbsp;&nbsp;			&lt;ul id="account_ul" class="link"&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;				&lt;li&gt;&lt;a href="http://www.twitter.com"&gt;Twitter&lt;/a&gt;&lt;/li&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;			        &lt;li&gt;&lt;a href="http://plus.google.com"&gt;Google+&lt;/a&gt;&lt;/li&gt; <br />&nbsp;&nbsp;&nbsp;			&lt;/ul&gt; <br /><br />&nbsp;&nbsp;		&lt;/div&gt; &lt;!-- chiusura <i>div_contenuto_link</i> --&gt;</blockquote><br />Dobbiamo mettere tanti di questi quante sono le categorie di link che vogliamo avere.<br /><br />Però, noi vogliamo visualizzare inizialmente soltanto i titoli delle categorie giusto? Ecco qui entra in scena il css. <br /><br /><br /><h3>                CSS</h3>Del foglio css vediamo soltanto le proprietà inerenti gli elenchi di link e le intestazioni delle categorie.<br /><br />Allora, io volevo una serie di linguette poste nel lato sinistro della pagina, quindi:<br /><blockquote>div.titolo { <br /><br />color:#EFEFEF; <br />padding-top:1px; <br />cursor:pointer;<br /><br />background: #545454; height: 30px;<br />border-top-right-radius: 25px; border-bottom-right-radius: 25px;<br />text-shadow: 1px 1px 1px #313131;<br />text-align:center; width:200px;<br />}<br /><br /></blockquote><br />L'aspetto che avrà sarà pressapoco questo:<br /><br /><div class="titolo" style="background: #545454; border-bottom-right-radius: 25px; border-top-right-radius: 25px; color: #efefef; cursor: pointer; height: 30px; padding-top: 1px; text-align: center; text-shadow: 1px 1px 1px #313131; width: 200px;"></div><br />Tutti i parametri sono abbastanza arbitrari, però così facendo abbiamo una linguetta che con una scritta bianca sopra rimane tutto sommato elegante e per nulla fastidiosa.<br />Siccome non ho impostato nessun paramentro di posizione, di default queste si posizioneranno sul bordo sinistro della pagina, però possiamo aggiungere<br /><blockquote>position: absolute; <br />left:0;</blockquote>per mettere in chiaro le cose.<br /><br /><br />Per quel che riguarda l'elenco dei link invece possiamo scrivere queste regole:<br /><blockquote>ul.link { <br /><br />position:absolute; <br />left:250px; <br />top:50px; <br /><br />opacity:0; <br />visibility:hidden;<br /><br />width:250px; <br /><br />-moz-transition: all .2s ease;<br />-webkit-transition: all .2s ease;<br />-o-transition: all .2s ease;<br />transition: all .2s ease;<br />&nbsp;}</blockquote><br />Questo è assai interessante. La posizione è spostata rispetto al bordo sinistro della pagina e rispetto al bordo superiore. Notiamo che l'opacità è 0 (è quindi trasparente) e che la visibilità è impostata come "nascosta", quindi di fatto non è visibile.<br />Infine abbiamo impostato degli effetti di transizione): ho deciso che i link compariranno con un effetto di scorrimento dal alto verso il basso e scompariranno scorrendo nel senso opposto (wow).<br /><br />L'azione di comparsa/scomparsa dei link va azionata al click sulla linguetta: è l'ora del Javascript. <br /><br /><br /><h3>                 Javascript </h3>La funzione Javascript non ci serve ad altro se non a modificare i parametri Javascript delle linguette e degli elenchi di link.<br />La chiamata alla funzione va inserita nell'HTML di prima:<br /><blockquote>&nbsp;&nbsp;		&lt;div id="account" class="link"&gt; &lt;!-- <i>div_contenuto_link</i>&nbsp; --&gt;<br />&nbsp;&nbsp;&nbsp;			&lt;div id="account_tit" class="titolo" <span style="color: #6aa84f;">onclick='collegamenti("account_ul", "account_tit")</span><span style="color: #6aa84f;">'</span>&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;				&lt;h2&gt;Social Network&lt;/h2&gt; <br />&nbsp;&nbsp;&nbsp;			&lt;/div&gt; <br /><br />&nbsp;&nbsp;&nbsp;			&lt;ul id="account_ul" class="link"&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="http://www.twitter.com"&gt;Twitter&lt;/a&gt;&lt;/li&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;			        &lt;li&gt;&lt;a href="http://plus.google.com"&gt;Google+&lt;/a&gt;&lt;/li&gt; <br /><br />&nbsp;&nbsp;&nbsp;<span style="color: orange;">&nbsp; <span style="color: #6aa84f;">&lt;li class="close" onclick='collegamenti("account_ul", "account_tit")'&gt;Chiudi&lt;/li&gt; </span></span>&nbsp;&nbsp;&nbsp;			&lt;/ul&gt; <br /><br />&nbsp;&nbsp;		&lt;/div&gt; &lt;!-- chiusura <i>div_contenuto_link</i> --&gt; </blockquote>I due parametri passati alla funzione sono nell'ordine l'id dell'elenco dei link e l'id della linguetta. Ho aggiunto anche una voce per nascondere i link direttamente dall'elenco dei link, anziché soltanto dalla linguetta.<br /><br />Ora passiamo a vedere il codice della funzione Javascript:<br /><blockquote>var flag = 0; //1 -&gt; link non visibili | 0 -&gt; link visibili<br />var flag_id; //id della lista mostrata<br />var tit_open;<br /><br />function collegamenti(nome, titolo) //nome -&gt; nome lista | titolo -&gt; nome intestazione<br />{<br />&nbsp;&nbsp;&nbsp; var elenco = document.getElementById(nome); //elenco: lista dei link della sezione<br />&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; var titoli = document.getElementById(titolo); //div intestazione<br /><br />&nbsp;&nbsp;&nbsp; /* se flag == 0 i link devono essere mostrati*/<br />&nbsp;&nbsp;&nbsp; if(!flag)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #3d85c6;">apri(nome, titoli, elenco);</span><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; tit_open = titoli;<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(flag_id == nome)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: #3d85c6;">chiudi(elenco, titoli);</span><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var aperto = document.getElementById(flag_id);<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<span style="color: #6fa8dc;"> <span style="color: #3d85c6;">chiudi(aperto, titoli);</span></span><br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(tit_open.style.width)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; tit_open.style.width = "200px"; //ridimensiona l'intestazione gia' aperta<br /><br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<span style="color: #3d85c6;"> apri(nome, titoli, elenco);</span><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; tit_open = titoli;<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />}</blockquote><br />Vediamo se riesco a spiegare cosa succede qui.<br /><br />C'è una variabile, <b>flag</b>, che viene impostata a 0 oppure a 1: 0 se non vengono mostrati link, 1 in caso contrario.<br />La variabile <b>flag_id</b> contiene l'id dell'ultima lista di link mostrata.<br />La variabile <b>tit_open</b> contiene l'id dell'ultima linguetta su cui si è cliccato.<br /><br />Ci sono due funzioni: <b>apri</b> e <b>chiudi</b>, che mostrano e nascondono i link, ma le vediamo dopo.<br /><br />Vediamo come funziona la funziona soprastante.<br />Quando clicco su di una linguetta, viene controllato il valore della variabile <i>flag</i>: se vale 0 significa che non ci sono link in mostra e quindi richiama la funzione <i>apri</i> e setta <i>flag</i> a 1. Se <i>flag</i> invece vale 1, in base alle considerazioni fatte prima, avemo un elenco di link in mostra ed abbiamo due casi: l'utente ha cliccato sulla stessa linguetta di prima o sulla voce "Chiudi" relativa, oppure ha cliccato su un'altra linguetta perché vuole visualizzare altri link. Ecco che qui entra in scena la variabile <i>flag_id</i>: se l'elenco dei link richiesto è quello ancora visualizzato (quindi memorizzato nella variabile) allora va chiusa la sezione aperta e basta (chiamando la funzione <i>chiudi</i>); altrimenti, va nascosto l'elenco corrente e aperto quello corrente (chiama <i>chiudi</i> su quello aperto e <i>apri</i> su quello richiesto).<br />La variabile <i> tit_open</i> ha il solo scopo di consentire l'allungamento e il ridimensionamento della linguetta al click  (non ne avevo accennato prima, scusate).<br /><br /><br />Ora vediamo le due banali funzioni <i>apri</i> e <i>chiudi</i>:<br /><blockquote>function apri(nome, titoli, elenco)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elenco.style.top = "80px";<br />&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; elenco.style.opacity = "1";<br />&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; elenco.style.visibility = "visible";<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; titoli.style.width = "240px";<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; flag_id = nome;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; flag=1;<br />&nbsp;&nbsp;&nbsp; }<br /><br />function chiudi(elenco, titoli)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; elenco.style.opacity = "0";<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; elenco.style.top = "50px";<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; elenco.style.visibility = "hidden";<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; titoli.style.width = "200px";<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; flag=0;<br />&nbsp;&nbsp;&nbsp; }</blockquote>Non c'è molto da commentare. La prima funzione cambia le proprietà css degli elenchi di link in modo che siano visibili, spostandoli leggermente verso il basso. Setta inoltre due variabili che abbiamo discusso prima. La seconda funzione reimposta le proprietà css degli elenchi di link come nel foglio di stile, in modo che siano di nuovo nascosti.<br /><br /><br />Spero di essermi spiegato, se avete bisogno di chiarimenti o volete suggerire miglioramenti, qua giù c'è l'area commenti, usatela :D<br /><br /><br /><h3>          Ehm...possiamo avere qualcosa di funzionante?</h3>Certo :D<br />Andando su <a href="http://dl.dropbox.com/u/7854975/Startpage/index.html">questa pagina</a> potete provare la startpage, mentre grazie a <a href="http://dl.dropbox.com/u/7854975/Startpage/startpage.tar.gz">questo link</a> potete scaricare un archivio contenente il file HTML (depurato dai miei link) e il foglio di stile.<br />Ovviamente per aggiungere i link è necessario avere qualche nozione di html. So che non rende la cosa alla portata di tutti, però non è nemmeno così difficile. State attenti a come chiamate i div, le liste e quali sono i parametri che passate alle funzioni, altrimenti non funzionerà correttamente.<br /><br />Questo è il mio risultato:<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-8IwJ_SJxChg/TmUPA3OxmCI/AAAAAAAAAYc/HxDTdpCb-XE/s1600/startpage.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="173" src="http://1.bp.blogspot.com/-8IwJ_SJxChg/TmUPA3OxmCI/AAAAAAAAAYc/HxDTdpCb-XE/s320/startpage.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Ecco qua :D</td></tr></tbody></table><br />È tutto! Che dire, spero vi sia utile :)
  </article>



      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

  <p class="footer-msg">Made with <a href="http://jekyllrb.com/">Jekyll</a> and ♥. Blog posts are under <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC</a>.</p>
  </div>

</footer>


  </body>

</html>
